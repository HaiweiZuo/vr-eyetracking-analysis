                <div class="seventh-module-view" id="seventhModuleView" style="display: none;">
                    <div class="container-fluid" style="min-height: 800px; padding: 20px;">
                        <!-- 页面标题 -->
                        <div class="row mb-4">
                            <div class="col-12 text-center">
                                <h2 style="color: #007bff;"><i class="fas fa-database"></i> <span data-lang-key="dataOrganizationTitle">数据整理与特征可视化</span></h2>
                                <p class="text-muted" data-lang-key="dataOrganizationSubtitle">基于数据库三大范式设计的归一化特征数据分析</p>
                                     </div>
                        </div>

                        <!-- 状态栏 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-info" id="statusAlert">
                                    <i class="fas fa-info-circle"></i> <span id="statusText" data-lang-key="loadingNormalizedData">正在加载归一化特征数据...</span>
                                </div>
                            </div>
                        </div>

                        <!-- 数据统计概览 -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card border-primary">
                                    <div class="card-body text-center">
                                        <i class="fas fa-users fa-2x text-primary mb-2"></i>
                                        <h4 class="card-title text-primary" id="totalSubjects">60</h4>
                                        <p class="card-text" data-lang-key="totalSubjects">受试者总数</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-success">
                                    <div class="card-body text-center">
                                        <i class="fas fa-play-circle fa-2x text-success mb-2"></i>
                                        <h4 class="card-title text-success" id="totalSessions">305</h4>
                                        <p class="card-text" data-lang-key="totalSessions">游戏会话数</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-warning">
                                    <div class="card-body text-center">
                                        <i class="fas fa-tasks fa-2x text-warning mb-2"></i>
                                        <h4 class="card-title text-warning" id="totalTasks">5</h4>
                                        <p class="card-text" data-lang-key="vrMmseTasks">VR-MMSE任务</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-info">
                                    <div class="card-body text-center">
                                        <i class="fas fa-chart-line fa-2x text-info mb-2"></i>
                                        <h4 class="card-title text-info" id="totalFeatures">13</h4>
                                        <p class="card-text" data-lang-key="normalizedFeatures">归一化特征</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 主要内容区域 -->
                        <div class="row">
                            <!-- 左侧控制面板 -->
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0"><i class="fas fa-sliders-h"></i> <span data-lang-key="dataFilterConfig">数据筛选与配置</span></h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- 任务选择 -->
                                        <div class="mb-4">
                                            <label class="form-label fw-bold">🎯 <span data-lang-key="selectTask">选择任务 (Q1-Q5)</span></label>
                                            <div class="btn-group-vertical d-grid gap-2" role="group">
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskAll" value="all" checked>
                                                <label class="btn btn-outline-primary" for="taskAll">
                                                    <i class="fas fa-layer-group"></i> <span data-lang-key="allTasks">全部任务</span>
                                                </label>
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskQ1" value="Q1">
                                                <label class="btn btn-outline-primary" for="taskQ1">
                                                    <i class="fas fa-1"></i> <span data-lang-key="taskQ1">任务 Q1</span>
                                                </label>
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskQ2" value="Q2">
                                                <label class="btn btn-outline-primary" for="taskQ2">
                                                    <i class="fas fa-2"></i> <span data-lang-key="taskQ2">任务 Q2</span>
                                                </label>
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskQ3" value="Q3">
                                                <label class="btn btn-outline-primary" for="taskQ3">
                                                    <i class="fas fa-3"></i> <span data-lang-key="taskQ3">任务 Q3</span>
                                                </label>
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskQ4" value="Q4">
                                                <label class="btn btn-outline-primary" for="taskQ4">
                                                    <i class="fas fa-4"></i> <span data-lang-key="taskQ4">任务 Q4</span>
                                                </label>
                                                <input type="radio" class="btn-check" name="taskFilter" id="taskQ5" value="Q5">
                                                <label class="btn btn-outline-primary" for="taskQ5">
                                                    <i class="fas fa-5"></i> <span data-lang-key="taskQ5">任务 Q5</span>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- 实验组选择 -->
                                        <div class="mb-4">
                                            <label class="form-label fw-bold">👥 <span data-lang-key="experimentalGroupFilter">实验组筛选</span></label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="groupAD" value="ad" checked>
                                                <label class="form-check-label" for="groupAD">
                                                    <span class="badge bg-danger me-2">AD</span><span data-lang-key="adGroupLabel">阿尔兹海默症组</span>
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="groupMCI" value="mci" checked>
                                                <label class="form-check-label" for="groupMCI">
                                                    <span class="badge bg-warning me-2">MCI</span><span data-lang-key="mciGroupLabel">轻度认知障碍组</span>
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="groupControl" value="control" checked>
                                                <label class="form-check-label" for="groupControl">
                                                    <span class="badge bg-success me-2">Control</span><span data-lang-key="controlGroupLabel">正常对照组</span>
                                                </label>
                                            </div>
                                        </div>

                                        <!-- 特征类型选择 -->
                                        <div class="mb-4">
                                            <label class="form-label fw-bold">📊 <span data-lang-key="featureType">特征类型</span></label>
                                            <select class="form-select" id="featureType">
                                                <option value="game_duration">🎮 游戏时长</option>
                                                <option value="roi_features">👁️ ROI特征 (3项)</option>
                                                <option value="rqa_1d_features">🔄 RQA-1D特征 (3项)</option>
                                                <option value="rqa_2d_features">🔄 RQA-2D特征 (3项)</option>
                                                <option value="rqa_features">🔄 RQA全部特征 (6项)</option>
                                                <option value="comprehensive">📈 综合对比 (10项)</option>
                                                <option value="all_features" selected>📊 全部特征 (10项)</option>
                                            </select>
                                        </div>

                                        <!-- 可视化类型选择 -->
                                        <div class="mb-4">
                                            <label class="form-label fw-bold">📋 <span data-lang-key="visualizationType">可视化类型</span></label>
                                            <select class="form-select" id="chartType">
                                                <option value="bar" selected>📊 柱状图</option>
                                                <option value="line">📈 折线图</option>
                                                <option value="scatter">🔸 散点图</option>
                                            </select>
                                        </div>

                                                        <!-- RQA配置选择 -->
                <div class="mb-4">
                    <label class="form-label fw-bold">⚙️ <span data-lang-key="rqaConfig">RQA参数配置</span></label>
                    <select class="form-select" id="rqaConfigSelect">
                        <option value="">正在加载RQA配置...</option>
                    </select>
                    <small class="form-text text-muted" data-lang-key="rqaConfigHelp">选择不同的RQA参数进行数据整合，系统将自动检测可用配置</small>
                </div>

                <!-- 归一化方法说明 -->
                <div class="mb-4">
                    <label class="form-label fw-bold">📊 <span data-lang-key="normalizationMethods">归一化方法说明</span></label>
                    <div class="card">
                        <div class="card-body p-3">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="text-primary mb-2">🎮 <span data-lang-key="gameDurationTitle">游戏时长特征</span></h6>
                                    <p class="mb-2 small">
                                        <strong data-lang-key="gameDurationMethod">方法</strong>: <span data-lang-key="percentileClip">百分位数截断归一化</span><br>
                                        <strong data-lang-key="gameDurationRange">范围</strong>: <span data-lang-key="gameDurationRangeValue">5%-95%分位数</span><br>
                                        <strong data-lang-key="gameDurationReason">原因</strong>: <span data-lang-key="gameDurationReasonText">避免极端异常值(如0.1秒或4分钟)影响正常数据分布</span>
                                    </p>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-success mb-2">👁️ <span data-lang-key="roiTimeTitle">ROI时间特征</span></h6>
                                    <p class="mb-2 small">
                                        <strong data-lang-key="roiTimeMethod">方法</strong>: <span data-lang-key="percentileClip">百分位数截断归一化</span><br>
                                        <strong data-lang-key="roiTimeRange">范围</strong>: <span data-lang-key="roiTimeRangeValue">5%-98%分位数</span><br>
                                        <strong data-lang-key="roiTimeReason">原因</strong>: <span data-lang-key="roiTimeReasonText">保留更多有效数据，过滤注视时间异常值</span>
                                    </p>
                                </div>
                            </div>
                            <hr class="my-2">
                            <div class="row">
                                <div class="col-12">
                                    <h6 class="text-warning mb-2">🔄 <span data-lang-key="rqaFeaturesTitle">RQA递归量化特征</span></h6>
                                    <p class="mb-1 small">
                                        <strong data-lang-key="rqaFeaturesMethod">方法</strong>: <span data-lang-key="minMaxNormalization">标准Min-Max归一化</span><br>
                                        <strong data-lang-key="rqaFeaturesRange">范围</strong>: <span data-lang-key="rqaFeaturesRangeValue">[0, 1]</span><br>
                                        <strong data-lang-key="rqaFeaturesReason">原因</strong>: <span data-lang-key="rqaFeaturesReasonText">RQA特征(RR、DET、ENT)具有理论范围限制，无需截断处理</span>
                                    </p>
                                    <div class="small text-muted">
                                        <span data-lang-key="rqaFeaturesList">包含: RR-1D, DET-1D, ENT-1D, RR-2D, DET-2D, ENT-2D</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                                        <!-- 操作按钮 -->
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary" id="refreshData">
                                                <i class="fas fa-sync-alt"></i> <span data-lang-key="loadRealData">加载真实数据</span>
                                            </button>
                                            <button class="btn btn-success" id="generateChart">
                                                <i class="fas fa-chart-bar"></i> <span data-lang-key="generateChart">生成图表</span>
                                            </button>
                                            <button class="btn btn-info" id="exportData">
                                                <i class="fas fa-download"></i> <span data-lang-key="exportData">导出数据</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 右侧数据展示区域 -->
                            <div class="col-md-8">
                                <!-- 图表区域 -->
                                <div class="card mb-3">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0"><i class="fas fa-chart-area"></i> <span data-lang-key="dataVisualizationChart">数据可视化图表</span></h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="chartContainer" style="height: 500px; position: relative;">
                                            <div class="d-flex align-items-center justify-content-center h-100">
                                                <div class="text-center text-muted">
                                                    <i class="fas fa-chart-line fa-3x mb-3"></i>
                                                    <h5 data-lang-key="clickGenerateChart">点击"生成图表"开始数据可视化</h5>
                                                    <p data-lang-key="chartGenerationDesc">选择任务、实验组和特征类型后生成对应的统计图表</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 数据表格 -->
                                <div class="card">
                                    <div class="card-header bg-secondary text-white">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h5 class="mb-0"><i class="fas fa-table"></i> <span data-lang-key="normalizedFeatureTable">归一化特征数据表格</span></h5>
                                            <span class="badge bg-light text-dark" id="tableRowCount" data-lang-key="tableRowCountText">0 行</span>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
                                            <table class="table table-striped table-hover" id="dataTable">
                                                <thead class="table-dark sticky-top">
                                                    <tr>
                                                        <th data-lang-key="sessionId">会话ID</th>
                                                        <th data-lang-key="subject">受试者</th>
                                                        <th data-lang-key="task">任务</th>
                                                        <th data-lang-key="experimentalGroup">实验组</th>
                                                        <th data-lang-key="gameDuration">游戏时长</th>
                                                        <th data-lang-key="kwRoi">KW-ROI</th>
                                                        <th data-lang-key="instRoi">INST-ROI</th>
                                                        <th data-lang-key="bgRoi">BG-ROI</th>
                                                        <th data-lang-key="rr1d">RR-1D</th>
                                                        <th data-lang-key="det1d">DET-1D</th>
                                                        <th data-lang-key="ent1d">ENT-1D</th>
                                                        <th data-lang-key="rr2d">RR-2D</th>
                                                        <th data-lang-key="det2d">DET-2D</th>
                                                        <th data-lang-key="ent2d">ENT-2D</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td colspan="14" class="text-center text-muted">
                                                            <i class="fas fa-database"></i> <span data-lang-key="clickRefreshData">点击"刷新数据"加载归一化特征数据</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

