<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title data-lang-key="title">VR眼球追踪数据可视化平台</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/enhanced_index.css">
</head>
<body>
    <div class="container-fluid">
        <!-- Header Banner -->
        <div class="header-banner">
            <div class="header-left">
                <h1>
                    <i class="fas fa-eye"></i>
                    <span data-lang-key="title">VR眼球追踪数据可视化平台</span>
                </h1>
                <p class="subtitle" data-lang-key="subtitle">三组认知功能评估的VR眼球追踪数据分析与可视化平台</p>
            </div>
            <div class="header-controls">
                <button class="restart-btn" onclick="restartServer()">
                    <i class="fas fa-redo"></i>
                    <span data-lang-key="restart">重启</span>
                </button>
                <div class="lang-switch">
                    <div class="lang-labels">
                        <span>中</span>
                        <label class="switch">
                            <input type="checkbox" id="langToggle" onchange="toggleLanguage()">
                            <span class="slider"></span>
                        </label>
                        <span>EN</span>
                    </div>
                </div>
                <div class="header-stats">
                    <p class="number" id="header-total-count">0</p>
                    <p class="label" data-lang-key="totalData">数据总数</p>
                </div>
            </div>
        </div>
                 
         <div class="main-content">
             <!-- 侧边栏 -->
             <div class="sidebar" id="sidebar">
                 <button class="sidebar-toggle" onclick="toggleSidebar()">
                     <i class="fas fa-bars" id="sidebarToggleIcon"></i>
                 </button>
                 <div class="sidebar-content">
                     <ul class="sidebar-nav">
                         <li>
                             <div class="sidebar-nav-item active" onclick="switchToVisualization()" data-view="visualization">
                                 <i class="fas fa-chart-line sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="dataVisualization">数据可视化</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToNewFeature()" data-view="newFeature">
                                 <i class="fas fa-magic sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="newFeature">新功能</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToRQAAnalysis()" data-view="rqaAnalysis">
                                 <i class="fas fa-project-diagram sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="rqaAnalysis">RQA分析</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToEventAnalysis()" data-view="eventAnalysis">
                                 <i class="fas fa-table sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="eventAnalysis">事件分析</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToRQAPipeline()" data-view="rqaPipeline">
                                 <i class="fas fa-cogs sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="rqaPipeline">RQA分析流程</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToFeatureExtraction()" data-view="featureExtraction">
                                 <i class="fas fa-brain sidebar-nav-icon"></i>
                                 <span class="sidebar-nav-text" data-lang-key="featureExtraction">综合特征提取</span>
                             </div>
                         </li>
                         <li>
                             <div class="sidebar-nav-item" onclick="switchToSeventhModule()" data-view="seventhModule">
                                 <i class="fas fa-code sidebar-nav-icon"></i>
                                <span class="sidebar-nav-text" data-lang-key="seventhModule">数据整理</span>
                            </div>
                        </li>
                        <li>
                            <div class="sidebar-nav-item" onclick="switchToEighthModule()" data-view="eighthModule">
                                <i class="fas fa-robot sidebar-nav-icon"></i>
                                <span class="sidebar-nav-text" data-lang-key="eighthModule">智能分析</span>
                             </div>
                         </li>
                         <li>
                            <div class="sidebar-nav-item" onclick="switchToNinthModule()" data-view="ninthModule">
                                <i class="fas fa-brain sidebar-nav-icon"></i>
                                <span class="sidebar-nav-text" data-lang-key="ninthModule">机器学习</span>
                             </div>
                         </li>
                         <li>
                            <div class="sidebar-nav-item" onclick="switchToTenthModule()" data-view="tenthModule">
                                <i class="fas fa-eye sidebar-nav-icon"></i>
                                <span class="sidebar-nav-text" data-lang-key="tenthModule">Eye-Index评估</span>
                             </div>
                         </li>
                     </ul>
                 </div>
             </div>
             
             <!-- 内容区域 -->
             <div class="content-wrapper">
                                 <!-- 数据可视化模块 - 动态加载容器 -->
                <div id="visualizationModuleContainer">
                    <!-- 模块内容将从 modules/module1_visualization.html 动态加载 -->
                    <div style="text-align: center; padding: 60px; color: #6c757d;">
                        <div class="spinner-border text-primary mb-3" role="status">
                            <span class="visually-hidden">初始化中...</span>
                            </div>
                        <h5>正在初始化数据可视化模块...</h5>
                        <p class="text-muted">✨ 第一个模块已拆分为独立文件</p>
                            </div>
                        </div>
                        
                 <!-- 数据导入模块 - 动态加载容器 -->
                 <div class="new-feature-view" id="newFeatureView" style="display: none;">
                     <div id="dataImportModuleContainer">
                         <!-- 模块内容将从 modules/module2_data_import.html 动态加载 -->
                         <div style="text-align: center; padding: 60px; color: #6c757d;">
                             <div class="spinner-border text-success mb-3" role="status">
                                 <span class="visually-hidden">初始化中...</span>
                         </div>
                             <h5>正在初始化数据导入模块...</h5>
                             <p class="text-muted">✨ 第二个模块已拆分为独立文件</p>
                             </div>
                             </div>
                             </div>
                 <!-- RQA分析模块 - 动态加载容器 -->
                 <div class="rqa-analysis-view" id="rqaAnalysisView" style="display: none;">
                     <div id="rqaAnalysisModuleContainer">
                         <!-- 模块内容将从 modules/module3_rqa_analysis.html 动态加载 -->
                         <div style="text-align: center; padding: 60px; color: #6c757d;">
                             <div class="spinner-border text-warning mb-3" role="status">
                                 <span class="visually-hidden">初始化中...</span>
                                     </div>
                             <h5>正在初始化RQA分析模块...</h5>
                             <p class="text-muted">✨ 第三个模块已拆分为独立文件</p>
                                         </div>
                                             </div>
                                         </div>
                                         
                              <!-- 事件分析模块 - 动态加载容器 -->
                 <div class="event-analysis-view" id="eventAnalysisView" style="display: none;">
                     <div id="eventAnalysisModuleContainer">
                         <!-- 模块内容将从 modules/module4_event_analysis.html 动态加载 -->
                         <div style="text-align: center; padding: 60px; color: #6c757d;">
                             <div class="spinner-border text-info mb-3" role="status">
                                 <span class="visually-hidden">初始化中...</span>
                         </div>
                             <h5>正在初始化事件分析模块...</h5>
                             <p class="text-muted">✨ 第四个模块已拆分为独立文件</p>
                             </div>
                         </div>
                             </div>
                             
                <!-- RQA分析流程模块 - 动态加载容器 -->
             <div class="rqa-pipeline-view" id="rqaPipelineView" style="display: none;">
                    <div id="rqaPipelineModuleContainer">
                        <!-- 模块内容将从 modules/module5_rqa_pipeline.html 动态加载 -->
                        <div style="text-align: center; padding: 60px; color: #6c757d;">
                            <div class="spinner-border text-secondary mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                     </div>
                            <h5>正在初始化RQA流程模块...</h5>
                            <p class="text-muted">✨ 第五个模块已拆分为独立文件</p>
                         </div>
                     </div>
                     </div>

                <!-- 综合特征提取模块 - 动态加载容器 -->
            <div class="comprehensive-feature-view" id="comprehensiveFeatureModule" style="display: none;">
                    <div id="comprehensiveFeatureModuleContainer">
                        <!-- 模块内容将从 modules/module6_comprehensive_feature.html 动态加载 -->
                        <div style="text-align: center; padding: 60px; color: #6c757d;">
                            <div class="spinner-border text-danger mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                     </div>
                            <h5>正在初始化综合特征提取模块...</h5>
                            <p class="text-muted">✨ 第六个模块已拆分为独立文件</p>
                 </div>
                                     </div>
                                 </div>
                                 
                                                <!-- 第七模块占位 -->
                <div class="seventh-module-view" id="seventhModuleView" style="display: none;">
                    <div id="dataOrganizationModuleContainer">
                        <div class="module-loading-placeholder text-center text-muted p-5">
                            <div class="spinner-border text-primary mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                            </div>
                            <h5>正在初始化数据整理模块...</h5>
                            <p class="text-muted">模块内容将从 /static/modules/module7_data_organization.html 加载</p>
                        </div>
                    </div>
                </div>

                                <!-- 第八模块 - 智能分析模块 -->
                <!-- 第八模块占位 -->
                <div class="eighth-module-view" id="eighthModuleView" style="display: none;">
                    <div id="intelligentAnalysisModuleContainer">
                        <div class="module-loading-placeholder text-center text-muted p-5">
                            <div class="spinner-border text-success mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                            </div>
                            <h5>正在初始化智能分析模块...</h5>
                            <p class="text-muted">模块内容将从 /static/modules/module8_intelligent_analysis.html 加载</p>
                        </div>
                    </div>
                </div>

                                <!-- 第九模块 - 机器学习预测模块 -->
                <!-- 第九模块占位 -->
                <div class="ninth-module-view" id="ninthModuleView" style="display: none;">
                    <div id="machineLearningModuleContainer">
                        <div class="module-loading-placeholder text-center text-muted p-5">
                            <div class="spinner-border text-warning mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                            </div>
                            <h5>正在初始化机器学习模块...</h5>
                            <p class="text-muted">模块内容将从 /static/modules/module9_machine_learning.html 加载</p>
                        </div>
                    </div>
                </div>

                                <!-- 第十模块 - Eye-Index 综合评估模块 -->
                <div class="tenth-module-view" id="tenthModuleView" style="display: none;">
                    <div id="eyeIndexModuleContainer">
                        <div class="module-loading-placeholder text-center text-muted p-5">
                            <div class="spinner-border text-danger mb-3" role="status">
                                <span class="visually-hidden">初始化中...</span>
                            </div>
                            <h5>正在初始化 Eye-Index 模块...</h5>
                            <p class="text-muted">模块内容将从 /static/modules/module10_eye_index.html 加载</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- 图片放大模态框 -->
    <div id="imageModal" class="image-modal">
        <div class="image-modal-content">
            <div class="image-modal-header">
                <h5 class="image-modal-title" id="imageModalTitle">图片预览</h5>
                <button class="image-modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="image-modal-body">
                <img id="imageModalImg" class="image-modal-img" src="" alt="">
            </div>
        </div>
    </div>

    <!-- jQuery库 - 必须在其他JavaScript库之前加载 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js库 - 模块7数据整理需要 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- 模块化脚本 -->
    <script src="/static/js/simple-module-loader.js"></script>
    <script src="/static/js/enhanced_index_core.js"></script>
    <script src="/static/js/enhanced_modules.js"></script>

</body>
</html> 
