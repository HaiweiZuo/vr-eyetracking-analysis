# RQA参数化分析流程使用说明

## 🎯 **新功能概览**

现在RQA分析流程支持**参数化配置**，不同的参数组合会存储在独立的目录中，方便您：
- 🔧 **调整分析参数** - 灵活配置嵌入维度、时间延迟等关键参数
- 📁 **组织化存储** - 每组参数的结果独立存储，避免混淆
- 📈 **对比分析** - 轻松比较不同参数设置的分析结果
- 🕒 **历史管理** - 查看和管理所有参数组合的分析历史

---

## 📋 **参数配置说明**

### 可配置参数：

| 参数 | 名称 | 默认值 | 范围 | 说明 |
|-----|------|-------|------|------|
| **m** | 嵌入维度 | 2 | 1-10 | 相空间重构的维度数 |
| **τ** | 时间延迟 | 1 | 1-20 | 时间序列嵌入的延迟步长 |
| **ε** | 递归阈值 | 0.05 | 0.001-1 | 递归判定的距离阈值 |
| **l_min** | 最小线长 | 2 | 1-50 | RQA分析中的最小对角线长度 |

### 参数组合签名：
系统自动生成格式：`m{m}_tau{tau}_eps{eps}_lmin{lmin}`
- 例如：`m2_tau1_eps0.05_lmin2`

---

## 📁 **目录结构**

新的文件组织结构：
```
data/
├── rqa_pipeline_results/          # RQA分析结果根目录
│   ├── m2_tau1_eps0.05_lmin2/     # 参数组合目录
│   │   ├── metadata.json          # 参数元数据
│   │   ├── step1_rqa_calculation/ # 步骤1：RQA计算
│   │   ├── step2_data_merging/    # 步骤2：数据合并
│   │   ├── step3_feature_enrichment/ # 步骤3：特征补充
│   │   ├── step4_statistical_analysis/ # 步骤4：统计分析
│   │   └── step5_visualization/   # 步骤5：可视化
│   ├── m3_tau2_eps0.1_lmin3/     # 另一组参数
│   └── ...
```

---

## 🚀 **使用步骤**

### 1️⃣ **配置参数**
1. 进入 **"RQA分析流程"** 模块
2. 在 **"RQA参数配置"** 面板中调整参数：
   - 嵌入维度 (m)
   - 时间延迟 (τ) 
   - 递归阈值 (ε)
   - 最小线长 (l_min)
3. 系统会自动显示当前参数组合签名

### 2️⃣ **执行分析**
- **方式一**：点击 **"运行完整流程"** 一键执行所有5个步骤
- **方式二**：逐步执行各个分析步骤

### 3️⃣ **查看结果**
分析完成后，结果会显示在页面下方，包括：
- 📊 组别对比条形图
- 📈 任务间变化趋势图
- 📋 统计数据表格

### 4️⃣ **管理历史**
1. 点击 **"历史参数"** 按钮查看所有参数组合
2. 可以：
   - **加载**：切换到历史参数设置
   - **查看**：直接查看历史结果
   - **删除**：清理不需要的结果

---

## ⚡ **快速示例**

### 场景：比较不同嵌入维度的影响

1. **第一次分析**：
   - 设置：m=2, τ=1, ε=0.05, l_min=2
   - 运行完整流程
   - 查看结果：`m2_tau1_eps0.05_lmin2`

2. **第二次分析**：
   - 修改：m=3（其他参数不变）
   - 再次运行完整流程
   - 查看结果：`m3_tau1_eps0.05_lmin2`

3. **对比分析**：
   - 使用历史记录功能切换查看两组结果
   - 比较不同嵌入维度的统计指标差异

---

## 🔍 **API接口说明**

新增的API端点：

| 方法 | 端点 | 功能 |
|------|------|------|
| GET | `/api/rqa-pipeline/param-history` | 获取参数历史记录 |
| GET | `/api/rqa-pipeline/results/<signature>` | 获取指定参数的结果 |
| DELETE | `/api/rqa-pipeline/delete/<signature>` | 删除指定参数的结果 |
| GET | `/api/rqa-pipeline/status?m=2&tau=1...` | 获取指定参数的状态 |

---

## ⚠️ **注意事项**

1. **参数影响**：不同参数设置会显著影响分析结果，建议：
   - 先使用默认参数进行基准分析
   - 再逐步调整单个参数观察变化

2. **存储空间**：每组参数会创建独立目录，注意：
   - 定期清理不需要的结果
   - 监控磁盘空间使用

3. **分析时间**：RQA计算是CPU密集型任务：
   - 高维度和小阈值会增加计算时间
   - 建议在后台运行长时间分析

4. **结果一致性**：
   - 相同参数多次运行结果应该一致
   - 如有差异请检查数据源是否变化

---

## 📞 **技术支持**

如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 服务器日志输出
3. 参数设置是否在合理范围内
4. 数据文件是否完整

---

*更新时间：2025年1月* 